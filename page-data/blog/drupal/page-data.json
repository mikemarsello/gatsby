{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/drupal","webpackCompilationHash":"4577d3f3835b13bca6dc","result":{"data":{"markdownRemark":{"html":"<h2>Composer</h2>\n<p>Install Drupal core\n<code class=\"language-text\">composer create-project drupal-composer/drupal-project:8.x-dev my_site_name_dir --stability dev --no-interaction</code></p>\n<p>Never use drush to download modules - only use composer to install them.\n<code class=\"language-text\">composer require drupal/some_contrib_module</code></p>\n<p>Composer downloads packages and their dependencies and places them in <code class=\"language-text\">/core</code> and <code class=\"language-text\">/vendor</code>. These folders/files are typically gitignored and are also required for a site to run. Therefore, these files either needs to be managed via git or composer commands need to be run on a live server. Composer commands can be memory intensive and slow so I typically prefer to commit files from <code class=\"language-text\">/vendor</code> and <code class=\"language-text\">/core</code> to ease deployment to live servers.</p>\n<hr>\n<h2>Custom Blocks</h2>\n<p>Necessary pieces for a custom block with custom variables, template, CSS/JS and stored configuration</p>\n<ol>\n<li>in /src/Form extend ConfigFormBase with custom class with getEditableConfigNames, getFormId, buildForm and submitForm methods</li>\n<li>in /src/Plugin/Block extend BlockBase with custom class using config load via <code class=\"language-text\">\\Drupal::config</code> in a build method</li>\n<li>implement hook_theme() to pass variables in step 2 and the template name</li>\n<li>implement preprocess_page() to attach library for any CSS &#x26; JS files: <code class=\"language-text\">$variables[&#39;#attached&#39;][&#39;library&#39;][] =&quot;module-name/library-name&quot;</code></li>\n<li>\n<p>add routing if necessary in <code class=\"language-text\">module-name.routing.yml</code> with following syntax</p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">module_name.form_settings:\n  path: &#39;/admin/desired-path&#39;\n  defaults:\n    _form: &#39;\\Drupal\\module_name\\Form\\formClassName&#39;\n    _title: &#39;&#39;\n  requirements:\n    _permission: &#39;access administration pages&#39;\n  options:\n    _admin_route: TRUE</code></pre>\n      </div>\n</li>\n</ol>\n<hr>\n<h2>Nodes</h2>\n<hr>\n<h2>Taxonomies</h2>\n<hr>\n<h2>Menus</h2>\n<h3>Create links</h3>\n<h3>nolinks</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">$link = MenuLinkContent::create([\n  &#39;title&#39;      =&gt; $menu_link_titles[$i],\n  &#39;link&#39;       =&gt; [&#39;uri&#39; =&gt; &#39;internal:##&#39;],\n  &#39;menu_name&#39;  =&gt; &#39;main&#39;,\n  &#39;weight&#39;     =&gt; $i,\n  &#39;expanded&#39;   =&gt; TRUE,\n]);</code></pre>\n      </div>\n<p>in menu UI:\npath = <code class=\"language-text\">route:&lt;nolink&gt;</code></p>\n<h2></h2>","frontmatter":{"date":"2018-8-30","path":"/blog/drupal","title":"drupal","author":"Mike Marsello","template":"blog","desc":"drupal"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}